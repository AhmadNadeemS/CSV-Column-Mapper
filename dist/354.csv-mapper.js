!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CsvMapper=t():e.CsvMapper=t()}(this,()=>{return e={},t=!1,self.onmessage=function(e){var r=e.data;if("cancel"!==r.type){if("parse"===r.type){t=!1;try{var n=function(e,r,n,s,o){var p=[],a=[],l="",h=!1;e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n");for(var u=0;u<e.length;u++){if(u%1e3==0&&t)throw new Error("Parsing cancelled");var c=e[u],f=e[u+1];if(u%5e4==0){var d=Math.round((s+u/e.length)/o*100);self.postMessage({type:"progress",percent:d,rowsParsed:p.length,chunkIndex:s})}c===n?h&&f===n?(l+=n,u++):h=!h:c!==r||h?"\n"!==c||h?l+=c:(a.push(l),p.push(a),a=[],l=""):(a.push(l),l="")}return(l||a.length>0)&&(a.push(l),p.push(a)),p.length>0&&1===p[p.length-1].length&&""===p[p.length-1][0]&&p.pop(),p}(r.text,r.delimiter,r.quoteChar,r.chunkIndex,r.totalChunks);t||self.postMessage({type:"result",rows:n,chunkIndex:r.chunkIndex,isComplete:r.chunkIndex===r.totalChunks-1})}catch(e){t||self.postMessage({type:"error",error:e.message||"Unknown error"})}}}else t=!0},e.default;var e,t});